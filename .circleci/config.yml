version: 2

jobs:
  build:
    machine: True
    environment:
        PATH: /home/ubuntu/miniconda2/bin:$PATH
        DISTRIB: "conda"
        PYTHON_VERSION: "3.5"
        NUMPY_VERSION: "*"
        SCIPY_VERSION: "*"
        SCIKIT_LEARN_VERSION: "*"
        MATPLOTLIB_VERSION: "*"
#        working_directory: ~/nilearn

      steps:
        - run: cd && rm -rf ~/.pyenv && rm -rf ~/virtualenvs
        - run: sudo -E apt-get -yq remove texlive-binaries --purge
        - run: sudo -E apt-get -yq update
        - run: sudo -E apt-get -yq --no-install-suggests --no-install-recommends --force-yes install dvipng texlive-latex-base texlive-latex-extra
        - run: cd ~/nilearn
        - run: source continuous_integration/install.sh
        - run: conda install sphinx coverage pillow pandas -y -n testenv









